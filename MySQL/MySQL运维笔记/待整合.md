1.阿里云RDS 5.6升级至5.7.44版本
```
1.遇到一个左关联查询，不以左表为驱动的SQL异常问题：排查执行计划，修改索引都没用.
检查优化器参数:
SELECT @@optimizer_switch;
排查了这些参数：condition_fanout_filter=on,derived_merge=on,prefer_ordering_index=on
最终确定condition_fanout_filter在针对关联时会影响执行计划的生成，修改为off解决问题。
```


2.阿里云RDS 5.6升级至5.7后的资源变化
```
4C8G ECS部署5.6 5.7，对一个30G的表进行全表读，IOPS最高是2000, 读写速率120MB。
8C16G RDS 从5.6升级到5.7，读速率下降了，对一个30G的表进行全表读，IOPS最高是8000, 读写速率120MB/S。而原先5.6，可以5000IOPS 达到320MB/S，可能与磁盘设置有关或者IOPS公式放大。
```

3.pg建库建用户
```
pg 和 opengauss
-- postgre
CREATE USER user_dev PASSWORD 'xxxx';
CREATE DATABASE tstdb WITH ENCODING 'utf8' template = template0 dbcompatibility ='B' owner user_dev;
GRANT ALL PRIVILEGES ON DATABASE tstdb TO user_dev;
ALTER USER user_dev set search_path to user_dev;

-- login load extension dolphin 
gsql -d tstdb -p 15400


-- user_dev login
gsql -d tstdb -p 15400 -U user_dev -h x.x.x.x

> CREATE SCHEMA user_dev AUTHORIZATION user_dev;

```

4.MySQL 5.6.21服务端配置SSL
```
# 生成CA证书
openssl genrsa 2048 > ca-key.pem
openssl req -new -x509 -nodes -days 3650 \
  -key ca-key.pem -out ca.pem -subj "/CN=MySQL_CA"

# 生成服务端私钥和请求
openssl req -newkey rsa:2048 -days 3650 -nodes \
  -keyout server-key.pem -out server-req.pem -subj "/CN=MySQL_Server"
# 用 CA 签发服务端证书
openssl x509 -req -in server-req.pem -days 3650 \
  -CA ca.pem -CAkey ca-key.pem -set_serial 01 -out server-cert.pem

# 生成客户端私钥和请求
openssl req -newkey rsa:2048 -days 3650 -nodes \
  -keyout client-key.pem -out client-req.pem -subj "/CN=MySQL_Client"
# 用 CA 签发客户端证书
openssl x509 -req -in client-req.pem -days 3650 \
  -CA ca.pem -CAkey ca-key.pem -set_serial 02 -out client-cert.pem

# bug：MySQL 5.6 只支持 PEM PKCS#1 格式 RSA 私钥，如果是 PKCS#8 或加密过的会报错。
openssl rsa -in server-key.pem -out server-key-fixed.pem
mv server-key-fixed.pem server-key.pem
chmod 600 server-key.pem
chown mysql:mysql server-key.pem

# 配置
[mysqld]
ssl-ca=/etc/mysql/certs/ca.pem
ssl-cert=/etc/mysql/certs/server-cert.pem
ssl-key=/etc/mysql/certs/server-key.pem

# 链接测试
mysql -u user -p \
  --ssl-ca=/etc/mysql/certs/ca.pem \
  --ssl-cert=/etc/mysql/certs/client-cert.pem \
  --ssl-key=/etc/mysql/certs/client-key.pem

SHOW VARIABLES LIKE 'have_ssl';
SHOW STATUS LIKE 'Ssl_cipher';
```
